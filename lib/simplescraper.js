function isletter(ch) {    return ch >= 'a' && ch <= 'z' || ch >= 'A' && ch <= 'Z';}function Item(text, position) {    var length = text.length;        this.tag = function () {        var tagname = '';                for (var k = position + 1; k < length && isletter(text[k]); k++)            tagname += text[k];                return tagname;    }        this.text = function () {        var p1 = text.indexOf('>', position);                if (text[p1-1] == '/')            return null;                    var p2 = text.indexOf('<', p1);                return text.substring(p1 + 1, p2);    }}function Iterator(text) {    var position = 0;    var length = text.length;        this.next = function () {        while (position < length && text[position] != '<')            position++;                    if (position >= length)            return null;                    return new Item(text, position++);            }        this.first = function () {        position = 0;        return this.next();    }        this.reset = function () { position = 0; }}function TagFilter(iterator, tag) {    this.first = function () {        iterator.reset();                for (var item = iterator.next(); item; item = iterator.next())            if (item.tag() == tag)                return item;    }        this.toArray = function () {        iterator.reset();                var result = [];        for (var item = iterator.next(); item; item = iterator.next())            if (item.tag() == tag)                result.push(item);                        return result;    }}function Document(text) {    var iterator = new Iterator(text);        this.select = function (tag) {        return new TagFilter(iterator, tag);    };}function doc(text) {    return new Document(text);}module.exports = {    doc: doc}